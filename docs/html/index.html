<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dialogic v0.8.65</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxy.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="dialogic.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dialogic
   </div>
   <div id="projectbrief">Generative Interactive Dialog</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespace_dialogic.html">Dialogic</a>  </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <a href="https://travis-ci.org/dhowe/dialogic"><img src="https://travis-ci.org/dhowe/dialogic.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <img src="https://img.shields.io/badge/license-GPL-orange.svg" alt="license" style="pointer-events: none;" class="inline"/> <a href="https://gitter.im/dhowe/dialogic?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=body_badge"><img src="https://badges.gitter.im/dhowe/dialogic.svg" alt="Gitter" style="pointer-events: none;" class="inline"/></a></p>
<p>Check out <a href="https://play.google.com/store/apps/details?id=com.TenderClaws.Tendar.home">Tendar</a>, the award-winning free AR game using <a class="el" href="namespace_dialogic.html">Dialogic</a> on your Android device! Here's a <a href="https://variety.com/2018/digital/news/tender-claws-tendar-ar-game-1203029351/">review</a>...</p>
<hr  />
<p><a href="https://github.com/dhowe/dialogic/wiki">FAQ</a> &#160;::&#160; <a href="https://github.com/dhowe/dialogic/wiki/Command-Reference">Command Reference</a> &#160;::&#160; <a href="http://rednoise.org/dialogic-api/">API Docs</a> &#160;::&#160; <a href="http://rednoise.org/dialogic/editor/">Workbench</a> &#160;::&#160; <a href="https://www.nuget.org/packages/org.rednoise.dialogic/">NuGet Package</a></p>
<p><a class="el" href="namespace_dialogic.html">Dialogic</a> is a system designed to help writers easily create interactive scripts with generative elements. It enables writers to craft compelling dialog that responds organically both to user prompts and to events in the environment. The system supports abitrarily complex interactions between multiple actors, but makes no assumptions about how text is displayed, or about how users will choose their responses. These tasks are left to game designers and programmers (using tools like Unity).</p>
<p>Each section of text in a <a class="el" href="namespace_dialogic.html">Dialogic</a> script is known as a <a href="https://github.com/dhowe/dialogic/wiki/Command-Reference#chat">CHAT</a>. Each chat has a unique name and contains one or more commands. When a chat is run, each command is executed in order, until all have been run, or the system branches to a new chat.</p>
<p>The simplest command is <a href="https://github.com/dhowe/dialogic/wiki/Commands#say">SAY</a> which simply echoes the given output:</p>
<div class="fragment"><div class="line">SAY Welcome to your first Dialogic script!</div>
</div><!-- fragment --><p>Because the system is designed for handling text, no quotations are needed around strings. In fact, the SAY keyword itself is even optional. So the simplest <a class="el" href="namespace_dialogic.html">Dialogic</a> script is just a single line of text:</p>
<div class="fragment"><div class="line">Welcome to your first Dialogic script!</div>
</div><!-- fragment --><p>&#160;</p>
<h2>Basic Commands</h2>
<p>Commands generally begin a line. Common commands include <a href="https://github.com/dhowe/dialogic/wiki/Command-Reference#say">SAY</a>, <a href="https://github.com/dhowe/dialogic/wiki/Command-Reference#do">DO</a>, <a href="https://github.com/dhowe/dialogic/wiki/Command-Reference#ask">ASK</a>, <a href="https://github.com/dhowe/dialogic/wiki/Command-Reference#opt">OPT</a>, <a href="https://github.com/dhowe/dialogic/wiki/Command-Reference#find">FIND</a>, <a href="https://github.com/dhowe/dialogic/wiki/Command-Reference#set">SET</a>, and <a href="https://github.com/dhowe/dialogic/wiki/Command-Reference">others</a></p>
<p>Here is a short example:</p>
<div class="fragment"><div class="line">CHAT Start</div>
<div class="line">SAY Welcome to my world</div>
<div class="line">WAIT 1.2</div>
<div class="line">SAY Thanks for Visiting</div>
<div class="line">ASK Do you want to play a game?</div>
<div class="line">OPT Sure</div>
<div class="line">OPT No Thanks</div>
</div><!-- fragment --><p>This script is called "Start" and performs a few simple functions; welcoming a visitor, pausing, then prompting for a response.</p>
<p>Of course in most cases we would want to <em>do something</em> with this response.</p>
<p>In the code below we <em>branch</em>, based on the user's response:</p>
<div class="fragment"><div class="line">ASK Do you want to play a game?</div>
<div class="line">OPT Sure #Game1</div>
<div class="line">OPT No Thanks</div>
</div><!-- fragment --><p>If the user selects the first option, <a class="el" href="namespace_dialogic.html">Dialogic</a> jumps to the chat named "Game1". If not, the current chat continues.</p>
<h2>Generative Elements</h2>
<p><a class="el" href="namespace_dialogic.html">Dialogic</a> is designed to smoothly blend scripted and generated text to create the type of variation found in natural-sounding dialog. The simplest way to blend generative elements into a response is via the OR operator (the pipe | character), grouped with parentheses as follows:</p>
<div class="fragment"><div class="line">SAY You look (sad | gloomy | depressed).</div>
</div><!-- fragment --><p>Elements between the | operators are randomly selected, so the line above will generate each of the following 3 outputs with equal probability:</p>
<div class="fragment"><div class="line">You look sad.</div>
<div class="line">You look gloomy.</div>
<div class="line">You look depressed.</div>
</div><!-- fragment --><p>Writers may also specify weightings for various choices, as well as favoring choices that have not been recently selected. Another example, demonstrating nested OR constructions:</p>
<div class="fragment"><div class="line">SAY I&#39;m (very | super | really) glad to ((meet | know) you | learn about you).</div>
</div><!-- fragment --><p>&#160;</p>
<p>You can also save the results of an expansion for later use. For example, lets say that you wanted to pick a character name to be reused several times in a paragraph. You could do the following:</p>
<div class="fragment"><div class="line">SAY Once there was a girl called [hero=(Jane | Mary)].</div>
<div class="line">SAY $hero lived in [home=(Neverland | Nowhereland)].</div>
<div class="line">SAY $hero liked living in $home.</div>
</div><!-- fragment --><p>Outputs would include:</p>
<div class="fragment"><div class="line">Once there was a girl called Jane.</div>
<div class="line">Jane lived in Neverland.</div>
<div class="line">Jane liked living in Neverland.</div>
</div><!-- fragment --><p>OR</p>
<div class="fragment"><div class="line">Once there was a girl called Mary.</div>
<div class="line">Mary lived in Nowhereland.</div>
<div class="line">Mary liked living in Nowhereland.</div>
</div><!-- fragment --><p>You could also use the <a href="https://github.com/dhowe/dialogic/wiki/Command-Reference#set">SET</a> command to similar effect:</p>
<div class="fragment"><div class="line">SET hero = (Jane | Mary)</div>
<div class="line">SET home = (Neverland | Nowhereland)</div>
<div class="line">SAY Once there was a girl called $hero</div>
<div class="line">SAY $hero lived in $home.</div>
<div class="line">SAY $hero liked living in $home.</div>
</div><!-- fragment --><h2>Transforms</h2>
<p><a class="el" href="namespace_dialogic.html">Dialogic</a> also supports <em>transformation functions</em> (called transforms) for modifying the results of expanded symbols and groups. Built-in transforms include Pluralize(), Articlize(), and <a href="http://rednoise.org/dialogic/class_dialogic_1_1_transforms.html">others</a>, which can be called from scripts as follows:</p>
<div class="fragment"><div class="line">ASK How many (tooth | menu | child).Pluralize() do you have?</div>
</div><!-- fragment --><p>which will result in one of the following:</p>
<div class="fragment"><div class="line">How many teeth do you have?</div>
<div class="line">How many menus do you have?</div>
<div class="line">How many children do you have?</div>
</div><!-- fragment --><p>OR</p>
<div class="fragment"><div class="line">SAY Are you (dog | cat | ant).Articlize()?</div>
</div><!-- fragment --><p>which gives:</p>
<div class="fragment"><div class="line">Are you a dog?</div>
<div class="line">Are you a cat?</div>
<div class="line">Are you an ant?</div>
</div><!-- fragment --><p>You can also use transforms on variables: </p><div class="fragment"><div class="line">SET choices = (tooth | menu | child)</div>
<div class="line">ASK How many $choices.Pluralize() do you have?</div>
</div><!-- fragment --><p>Or on parenthesized words or phrases </p><div class="fragment"><div class="line">ASK How many (octopus).Pluralize() do you have?</div>
</div><!-- fragment --><p>You can also use built-in C# string functions: </p><div class="fragment"><div class="line">SET choices = (tooth | menu | child)</div>
<div class="line">ASK How many $choices.ToUpper() do you have?</div>
</div><!-- fragment --><p>Or arbitrarily chain multiple transforms: </p><div class="fragment"><div class="line">SET choices = (tooth | menu | child)</div>
<div class="line">ASK How many $choices.Pluralize().ToUpper() do you have?</div>
</div><!-- fragment --><p>&#160;</p>
<p>Coders can also add custom transforms as follows, which can then be called from <a class="el" href="namespace_dialogic.html">Dialogic</a> scripts:</p>
<div class="fragment"><div class="line">chatRuntime.AddTransform(&quot;MyTrans&quot;, MyTransform);</div>
</div><!-- fragment --><p>Transform functions should be static functions that take and return a string, as follows:</p>
<div class="fragment"><div class="line">public static string MyTransform(string str) { ... }</div>
</div><!-- fragment --><h2>Interruption / Smoothing</h2>
<p><a class="el" href="namespace_dialogic.html">Dialogic</a> is also designed to respond naturally to user interaction and/or interruption. This is enabled primarily via a stack abstraction in which new CHATS are added at top. When an event or other interruption occurs, the response CHAT is pushed atop the stack and the current CHAT marked as 'interrupted'. When the response CHAT is finished, control moves to the next interrupted chat on the stack. Smoothing sections can be added in order to make transitions more natural, i.e., 'so as I was saying'.</p>
<p>To add smoothing to a Chat, use the 'onResume' metadata tag, specifying either the label of the smoothing Chat, or a set of FIND constraints to use in locating it. In the example below, each time the 'Long' Chat is interrupted, 'Smooth2' will be triggered before it resumes once again.</p>
<div class="fragment"><div class="line">CHAT Long {onResume=Smooth2}</div>
<div class="line">SAY Oh, it&#39;s you...</div>
<div class="line">SAY It&#39;s been a long time. How have you been?</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="line">SAY You get what I&#39;m saying?</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">CHAT Smooth2 {noStart=true}</div>
<div class="line">SAY Where was I? Oh, yes</div>
</div><!-- fragment --><h2>Special Characters</h2>
<p>As in most scripting languages, certain characters have special meaning in <a class="el" href="namespace_dialogic.html">Dialogic</a> scripts. These include the following: !, #, }, {, ", =, etc. If you need to use these characters in your scripts, you can use &lt;a href="<a href="https://dev.w3.org/html5/html-author/charref">https://dev.w3.org/html5/html-author/charref</a>"&gt;HTML entities, which will be replaced in <a class="el" href="namespace_dialogic.html">Dialogic</a>'s output. This also applies to leading and trailing spaces and multiple consecutive spaces, for which you can use the <code>&#160;</code> entity.</p>
<div class="fragment"><div class="line">CHAT TestSpecial</div>
<div class="line">SAY &amp;num; is usually a label</div>
</div><!-- fragment --><p>which will output:</p>
<div class="fragment"><div class="line"># is usually a label</div>
</div><!-- fragment --><h2>Integrating <a class="el" href="namespace_dialogic.html">Dialogic</a></h2>
<p><a class="el" href="namespace_dialogic.html">Dialogic</a> can be run alone or with a game engine, such as Unity3D (see example below). The system includes two main components: the scripting language described above, and the runtime environment, which is responsible for passing events between the runtime and the application.</p>
<p>In the C# example below, a <a href="http://rednoise.org/dialogic/class_dialogic_1_1_chat_runtime.html"><em>ChatRuntime</em></a> is created that reads in a chat descriptions from a plain-text file (or folder) and compiles them into a list of <em>Chat</em> objects. The runtime's Run() function is called to start execution, specifying the Chat to run first.</p>
<p>The application calls the runtime's Update() function each frame, passing the current world-state (a dictionary of key-value pairs) and any event that occurred during that frame. If a <a class="el" href="namespace_dialogic.html">Dialogic</a> event occurs during the frame, it is returned from the Update function. </p><div class="fragment"><div class="line">{C#}</div>
<div class="line"> </div>
<div class="line">public RealtimeGame() </div>
<div class="line">{</div>
<div class="line">   dialogic = new ChatRuntime();</div>
<div class="line">   dialogic.ParseFile(fileOrFolder);</div>
<div class="line">   dialogic.Run(&quot;#StartChat&quot;);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">public IUpdateEvent Update() // Game Loop</div>
<div class="line">{</div>
<div class="line">    // Call the dialogic interface</div>
<div class="line">    IUpdateEvent evt = dialogic.Update(worldState, ref gameEvent);</div>
<div class="line"> </div>
<div class="line">    // Handle the event received</div>
<div class="line">    if (evt != null) HandleEvent(evt);</div>
<div class="line">    </div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><h2>Serialization</h2>
<p>The <a class="el" href="namespace_dialogic.html">Dialogic</a> system can be paused and resumed, with state saved to a file or an array of bytes. The specific serialization package is up to you (we generally use <a href="https://github.com/neuecc/MessagePack-CSharp">MessagePack</a>, but other options can be used, as long as they implement the <a href="http://rednoise.org/dialogic/interface_dialogic_1_1_i_serializer.html">ISerializer</a> interface.) In the example below, current state is saved to a file, then reloaded into a new ChatRuntime.</p>
<div class="fragment"><div class="line"> {C#}</div>
<div class="line"> </div>
<div class="line">// Create a runtime and load it with Chats</div>
<div class="line">ChatRuntime rt1 = new ChatRuntime();</div>
<div class="line">rt1.ParseFile(fileOrFolder);</div>
<div class="line"> </div>
<div class="line">// Now serialize its state to a file</div>
<div class="line">FileInfo saveFile = new FileInfo(&quot;./runtime.ser&quot;);</div>
<div class="line">ISerializer serializer = new SerializerMessagePack();</div>
<div class="line">tmp.Save(serializer, saveFile);</div>
<div class="line"> </div>
<div class="line">// Now load it from the file and continue</div>
<div class="line">ChatRuntime rt2 = ChatRuntime.Create(serializer, saveFile);</div>
<div class="line">rt2.Run();</div>
</div><!-- fragment --><p>&#160;</p>
<h2>Building <a class="el" href="namespace_dialogic.html">Dialogic</a> with Visual Studio</h2>
<ol type="1">
<li>Clone this respository to your local file system <code>$ git clone <a href="https://github.com/dhowe/dialogic.git">https://github.com/dhowe/dialogic.git</a></code></li>
</ol>
<ol type="1">
<li>From Visual Studio, do Menu-&gt;File-&gt;Open, then select dialogic.sln from the top-level of the cloned dir</li>
</ol>
<ol type="1">
<li>The solution should open with 3-4 sub-projects, as in the image below.</li>
</ol>
<ol type="1">
<li>To run the tests, right-click 'tests' and select 'Run Item'</li>
</ol>
<p><img src="http://rednoise.org/images/vsloaded.png?raw=true" alt="" class="inline"/></p>
<p>&#160; </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
